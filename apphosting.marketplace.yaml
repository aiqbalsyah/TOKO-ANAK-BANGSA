# Firebase App Hosting Configuration for Marketplace
# This config deploys the Marketplace Next.js app (Port 3001 - Public E-commerce)

runConfig:
  # Use Node.js 22 runtime for Next.js 16
  runtime: nodejs22

  # Resource allocation (higher for public-facing marketplace)
  cpu: 2
  memoryMiB: 1024
  minInstances: 1
  maxInstances: 20

  # Concurrency settings
  concurrency: 80

# Root directory for this app
rootDirectory: apps/marketplace

# Environment variables for Next.js build and runtime
env:
  # Next.js build mode
  - variable: NODE_ENV
    value: production

  # App identification
  - variable: NEXT_PUBLIC_APP_NAME
    value: "Marketplace"

  # Firebase configuration (will be overridden by environment-specific values)
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    secret: FIREBASE_API_KEY

  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    secret: FIREBASE_AUTH_DOMAIN

  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    secret: FIREBASE_PROJECT_ID

  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    secret: FIREBASE_STORAGE_BUCKET

  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    secret: FIREBASE_MESSAGING_SENDER_ID

  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    secret: FIREBASE_APP_ID

  - variable: NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID
    secret: FIREBASE_MEASUREMENT_ID

  # API endpoint
  - variable: NEXT_PUBLIC_API_URL
    value: "https://api.tokobangsaanak.com"
